<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title></title>
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="2575.7">
  <style type="text/css">
    p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica}
    p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; min-height: 14.0px}
  </style>
</head>
<body>
<p class="p1">&lt;!DOCTYPE html&gt;</p>
<p class="p1">&lt;html lang="en"&gt;</p>
<p class="p1">&lt;head&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;meta charset="UTF-8"&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;title&gt;Grand Luxury Christmas Tree - Trump Style&lt;/title&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;script src="https://cdn.tailwindcss.com"&gt;&lt;/script&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;script src="https://unpkg.com/react@19/umd/react.development.js"&gt;&lt;/script&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;script src="https://unpkg.com/react-dom@19/umd/react-dom.development.js"&gt;&lt;/script&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;script src="https://unpkg.com/@babel/standalone/babel.min.js"&gt;&lt;/script&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;script src="https://unpkg.com/three@0.160.0/build/three.min.js"&gt;&lt;/script&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;script src="https://cdn.jsdelivr.net/npm/@mediapipe/hands/hands.js"&gt;&lt;/script&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js"&gt;&lt;/script&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;style&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>body { margin: 0; background-color: #041e16; overflow: hidden; font-family: 'Times New Roman', serif; }</p>
<p class="p1"><span class="Apple-converted-space">        </span>canvas { display: block; }</p>
<p class="p1"><span class="Apple-converted-space">        </span>#video-container { position: fixed; bottom: 20px; right: 20px; width: 160px; height: 120px; border: 2px solid #D4AF37; border-radius: 8px; overflow: hidden; z-index: 100; opacity: 0.7; }</p>
<p class="p1"><span class="Apple-converted-space">        </span>video { transform: scaleX(-1); width: 100%; height: 100%; object-fit: cover; }</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;/style&gt;</p>
<p class="p1">&lt;/head&gt;</p>
<p class="p1">&lt;body&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;div id="root"&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;div id="video-container"&gt;&lt;video id="input-video"&gt;&lt;/video&gt;&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;script type="text/babel"&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>const { useRef, useEffect, useState, useMemo, useCallback } = React;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>// --- 核心配置 ---</p>
<p class="p1"><span class="Apple-converted-space">        </span>const GOLD = "#D4AF37";</p>
<p class="p1"><span class="Apple-converted-space">        </span>const EMERALD = "#041e16";</p>
<p class="p1"><span class="Apple-converted-space">        </span>const PARTICLE_COUNT = 1000;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>const ChristmasApp = () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">            </span>const mountRef = useRef(null);</p>
<p class="p1"><span class="Apple-converted-space">            </span>const [status, setStatus] = useState('CHAOS'); // 'CHAOS' | 'FORMED'</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>// 状态引用，用于 Three.js 循环</p>
<p class="p1"><span class="Apple-converted-space">            </span>const stateRef = useRef({<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">                </span>status: 'CHAOS',<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">                </span>particles: [],<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">                </span>targets: [],<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">                </span>chaos: [],</p>
<p class="p1"><span class="Apple-converted-space">                </span>photos: []<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>});</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>// 初始化 3D 场景</p>
<p class="p1"><span class="Apple-converted-space">            </span>useEffect(() =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                </span>const scene = new THREE.Scene();</p>
<p class="p1"><span class="Apple-converted-space">                </span>scene.background = new THREE.Color(EMERALD);</p>
<p class="p1"><span class="Apple-converted-space">                </span>scene.fog = new THREE.Fog(EMERALD, 10, 50);</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                </span>const camera = new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 0.1, 1000);</p>
<p class="p1"><span class="Apple-converted-space">                </span>camera.position.set(0, 4, 25);</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                </span>const renderer = new THREE.WebGLRenderer({ antialias: true });</p>
<p class="p1"><span class="Apple-converted-space">                </span>renderer.setSize(window.innerWidth, window.innerHeight);</p>
<p class="p1"><span class="Apple-converted-space">                </span>renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));</p>
<p class="p1"><span class="Apple-converted-space">                </span>mountRef.current.appendChild(renderer.domElement);</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                </span>// 灯光：高亮金色光点</p>
<p class="p1"><span class="Apple-converted-space">                </span>const ambientLight = new THREE.AmbientLight(0xffffff, 0.3);</p>
<p class="p1"><span class="Apple-converted-space">                </span>scene.add(ambientLight);</p>
<p class="p1"><span class="Apple-converted-space">                </span>const spotLight = new THREE.SpotLight(GOLD, 100);</p>
<p class="p1"><span class="Apple-converted-space">                </span>spotLight.position.set(10, 20, 10);</p>
<p class="p1"><span class="Apple-converted-space">                </span>scene.add(spotLight);</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                </span>// 创建装饰物 (InstancedMesh)</p>
<p class="p1"><span class="Apple-converted-space">                </span>const geometry = new THREE.SphereGeometry(0.15, 12, 12);</p>
<p class="p1"><span class="Apple-converted-space">                </span>const material = new THREE.MeshStandardMaterial({<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">                    </span>color: GOLD,<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">                    </span>metalness: 0.9,<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">                    </span>roughness: 0.1,</p>
<p class="p1"><span class="Apple-converted-space">                    </span>emissive: GOLD,</p>
<p class="p1"><span class="Apple-converted-space">                    </span>emissiveIntensity: 0.5</p>
<p class="p1"><span class="Apple-converted-space">                </span>});</p>
<p class="p1"><span class="Apple-converted-space">                </span>const mesh = new THREE.InstancedMesh(geometry, material, PARTICLE_COUNT);</p>
<p class="p1"><span class="Apple-converted-space">                </span>scene.add(mesh);</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                </span>// 生成双坐标</p>
<p class="p1"><span class="Apple-converted-space">                </span>const dummy = new THREE.Object3D();</p>
<p class="p1"><span class="Apple-converted-space">                </span>for (let i = 0; i &lt; PARTICLE_COUNT; i++) {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>// Chaos: 球形散落</p>
<p class="p1"><span class="Apple-converted-space">                    </span>const cPos = new THREE.Vector3(</p>
<p class="p1"><span class="Apple-converted-space">                        </span>(Math.random() - 0.5) * 40,</p>
<p class="p1"><span class="Apple-converted-space">                        </span>(Math.random() - 0.5) * 30,</p>
<p class="p1"><span class="Apple-converted-space">                        </span>(Math.random() - 0.5) * 40</p>
<p class="p1"><span class="Apple-converted-space">                    </span>);</p>
<p class="p1"><span class="Apple-converted-space">                    </span>// Target: 圣诞树圆锥</p>
<p class="p1"><span class="Apple-converted-space">                    </span>const h = Math.random() * 18;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>const r = (18 - h) * 0.25;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>const angle = Math.random() * Math.PI * 2;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>const tPos = new THREE.Vector3(</p>
<p class="p1"><span class="Apple-converted-space">                        </span>Math.cos(angle) * r,</p>
<p class="p1"><span class="Apple-converted-space">                        </span>h - 8,</p>
<p class="p1"><span class="Apple-converted-space">                        </span>Math.sin(angle) * r</p>
<p class="p1"><span class="Apple-converted-space">                    </span>);</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                    </span>stateRef.current.chaos.push(cPos);</p>
<p class="p1"><span class="Apple-converted-space">                    </span>stateRef.current.targets.push(tPos);</p>
<p class="p1"><span class="Apple-converted-space">                    </span>stateRef.current.particles.push(cPos.clone());</p>
<p class="p1"><span class="Apple-converted-space">                </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                </span>// 渲染循环</p>
<p class="p1"><span class="Apple-converted-space">                </span>const animate = () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>requestAnimationFrame(animate);</p>
<p class="p1"><span class="Apple-converted-space">                    </span>const isFormed = stateRef.current.status === 'FORMED';</p>
<p class="p1"><span class="Apple-converted-space">                    </span>const speed = isFormed ? 0.08 : 0.04;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                    </span>for (let i = 0; i &lt; PARTICLE_COUNT; i++) {</p>
<p class="p1"><span class="Apple-converted-space">                        </span>const target = isFormed ? stateRef.current.targets[i] : stateRef.current.chaos[i];</p>
<p class="p1"><span class="Apple-converted-space">                        </span>stateRef.current.particles[i].lerp(target, speed);</p>
<p class="p2"><span class="Apple-converted-space">                        </span></p>
<p class="p1"><span class="Apple-converted-space">                        </span>dummy.position.copy(stateRef.current.particles[i]);</p>
<p class="p1"><span class="Apple-converted-space">                        </span>dummy.scale.setScalar(isFormed ? 1 : 1.5);</p>
<p class="p1"><span class="Apple-converted-space">                        </span>dummy.updateMatrix();</p>
<p class="p1"><span class="Apple-converted-space">                        </span>mesh.setMatrixAt(i, dummy.matrix);</p>
<p class="p1"><span class="Apple-converted-space">                    </span>}</p>
<p class="p1"><span class="Apple-converted-space">                    </span>mesh.instanceMatrix.needsUpdate = true;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>renderer.render(scene, camera);</p>
<p class="p1"><span class="Apple-converted-space">                </span>};</p>
<p class="p1"><span class="Apple-converted-space">                </span>animate();</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                </span>// 响应窗口大小</p>
<p class="p1"><span class="Apple-converted-space">                </span>window.addEventListener('resize', () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>camera.aspect = window.innerWidth / window.innerHeight;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>camera.updateProjectionMatrix();</p>
<p class="p1"><span class="Apple-converted-space">                    </span>renderer.setSize(window.innerWidth, window.innerHeight);</p>
<p class="p1"><span class="Apple-converted-space">                </span>});</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                </span>return () =&gt; renderer.dispose();</p>
<p class="p1"><span class="Apple-converted-space">            </span>}, []);</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>// 手势识别逻辑集成</p>
<p class="p1"><span class="Apple-converted-space">            </span>useEffect(() =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                </span>const videoElement = document.getElementById('input-video');</p>
<p class="p1"><span class="Apple-converted-space">                </span>const hands = new Hands({locateFile: (file) =&gt; `https://cdn.jsdelivr.net/npm/@mediapipe/hands/${file}`});</p>
<p class="p2"><span class="Apple-converted-space">                </span></p>
<p class="p1"><span class="Apple-converted-space">                </span>hands.setOptions({ maxNumHands: 1, modelComplexity: 1, minDetectionConfidence: 0.6 });</p>
<p class="p1"><span class="Apple-converted-space">                </span>hands.onResults((results) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>if (results.multiHandLandmarks &amp;&amp; results.multiHandLandmarks.length &gt; 0) {</p>
<p class="p1"><span class="Apple-converted-space">                        </span>const lm = results.multiHandLandmarks[0];</p>
<p class="p1"><span class="Apple-converted-space">                        </span>// 计算拇指尖(4)和食指尖(8)的距离</p>
<p class="p1"><span class="Apple-converted-space">                        </span>const dist = Math.hypot(lm[4].x - lm[8].x, lm[4].y - lm[8].y);</p>
<p class="p2"><span class="Apple-converted-space">                        </span></p>
<p class="p1"><span class="Apple-converted-space">                        </span>// 捏合 = 变回树，张开 = 散开</p>
<p class="p1"><span class="Apple-converted-space">                        </span>const newStatus = dist &lt; 0.1 ? 'FORMED' : 'CHAOS';</p>
<p class="p1"><span class="Apple-converted-space">                        </span>if (newStatus !== stateRef.current.status) {</p>
<p class="p1"><span class="Apple-converted-space">                            </span>stateRef.current.status = newStatus;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>setStatus(newStatus);</p>
<p class="p1"><span class="Apple-converted-space">                        </span>}</p>
<p class="p1"><span class="Apple-converted-space">                    </span>}</p>
<p class="p1"><span class="Apple-converted-space">                </span>});</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                </span>const camera = new Camera(videoElement, {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>onFrame: async () =&gt; { await hands.send({image: videoElement}); },</p>
<p class="p1"><span class="Apple-converted-space">                    </span>width: 640, height: 480</p>
<p class="p1"><span class="Apple-converted-space">                </span>});</p>
<p class="p1"><span class="Apple-converted-space">                </span>camera.start();</p>
<p class="p1"><span class="Apple-converted-space">            </span>}, []);</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>return (</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div className="relative w-full h-full"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>{/* UI 覆盖层 */}</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;div className="absolute top-12 left-12 pointer-events-none"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;h1 className="text-[#D4AF37] text-5xl font-bold tracking-[0.2em] mb-2 uppercase"&gt;The Grand Gold&lt;/h1&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;p className="text-[#D4AF37] opacity-60 text-lg italic uppercase tracking-widest"&gt;Interactive Holiday Installation&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;div className="mt-8 flex items-center gap-4"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;div className={`px-4 py-1 border border-[#D4AF37] text-[#D4AF37] text-xs ${status === 'FORMED' ? 'bg-[#D4AF37] text-black' : ''}`}&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>STATUS: {status}</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;div ref={mountRef} className="w-full h-screen" /&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;div className="absolute bottom-10 left-12 text-[#D4AF37] opacity-40 text-xs"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>HAND GESTURE: PINCH TO FORM TREE | RELEASE TO UNLEASH CHAOS</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>);</p>
<p class="p1"><span class="Apple-converted-space">        </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>const root = ReactDOM.createRoot(document.getElementById('root'));</p>
<p class="p1"><span class="Apple-converted-space">        </span>root.render(&lt;ChristmasApp /&gt;);</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;/script&gt;</p>
<p class="p1">&lt;/body&gt;</p>
<p class="p1">&lt;/html&gt;</p>
</body>
</html>
